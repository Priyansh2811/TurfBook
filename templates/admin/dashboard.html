{% extends 'base.html' %}
{% block title %}Admin Dashboard - TurfBook{% endblock %}

{% block extra_css %}
<style>
  .admin-layout { display: grid; grid-template-columns: 240px 1fr; gap: 0; min-height: calc(100vh - 64px); }
  .admin-sidebar { background: #1f2937; padding: 24px 16px; }
  .admin-sidebar h3 { color: #9ca3af; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.1em; margin: 20px 0 8px; padding: 0 8px; }
  .admin-sidebar h3:first-child { margin-top: 0; }
  .admin-nav a { display: flex; align-items: center; gap: 10px; padding: 10px 12px; border-radius: 10px; color: #9ca3af; font-size: 0.95rem; margin-bottom: 2px; transition: all 0.2s; }
  .admin-nav a:hover, .admin-nav a.active { background: rgba(34,197,94,0.15); color: #4ade80; }
  .admin-nav a i { width: 18px; }
  .admin-content { padding: 30px; background: #f9fafb; }
  .admin-content h1 { font-size: 1.6rem; font-weight: 800; margin-bottom: 24px; }
  .stat-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 30px; }
  .stat-card { background: white; border-radius: 16px; padding: 24px; box-shadow: 0 2px 12px rgba(0,0,0,0.07); }
  .stat-card .icon { font-size: 2rem; margin-bottom: 12px; }
  .stat-card .number { font-size: 2rem; font-weight: 800; color: var(--dark); }
  .stat-card .label { color: var(--gray); font-size: 0.85rem; margin-top: 4px; }
  table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
  th { background: #f3f4f6; padding: 12px 16px; text-align: left; font-weight: 700; color: #374151; }
  td { padding: 12px 16px; border-bottom: 1px solid #f3f4f6; }
  tr:hover td { background: #f9fafb; }
  .table-card { background: white; border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.07); overflow: hidden; }
  .table-card-header { padding: 20px 24px; border-bottom: 1px solid #f3f4f6; display: flex; justify-content: space-between; align-items: center; }
  .table-card-header h3 { font-size: 1.05rem; font-weight: 700; }
  @media(max-width:900px) { .admin-layout { grid-template-columns: 1fr; } .stat-cards { grid-template-columns: 1fr 1fr; } }
</style>
{% endblock %}

{% block content %}
<div class="admin-layout">
  <div class="admin-sidebar">
    <div class="admin-nav">
      <h3>Main</h3>
      <a href="/admin" class="active"><i class="fa fa-tachometer-alt"></i> Dashboard</a>
      <a href="/admin/turfs"><i class="fa fa-map-marker-alt"></i> Turfs</a>
      <a href="/admin/bookings"><i class="fa fa-calendar"></i> Bookings</a>
      <a href="/admin/users"><i class="fa fa-users"></i> Users</a>
      <h3>Site</h3>
      <a href="/"><i class="fa fa-home"></i> View Site</a>
      <a href="/logout"><i class="fa fa-sign-out-alt"></i> Logout</a>
    </div>
  </div>

  <div class="admin-content">
    <h1>Admin Dashboard</h1>

    <div class="stat-cards">
      <div class="stat-card">
        <div class="icon">üèüÔ∏è</div>
        <div class="number">{{ stats.total_turfs }}</div>
        <div class="label">Total Turfs</div>
      </div>
      <div class="stat-card">
        <div class="icon">üë•</div>
        <div class="number">{{ stats.total_users }}</div>
        <div class="label">Registered Users</div>
      </div>
      <div class="stat-card">
        <div class="icon">üìÖ</div>
        <div class="number">{{ stats.total_bookings }}</div>
        <div class="label">Total Bookings</div>
      </div>
      <div class="stat-card">
        <div class="icon">üí∞</div>
        <div class="number">‚Çπ{{ stats.total_revenue }}</div>
        <div class="label">Total Revenue</div>
      </div>
    </div>

    <div class="table-card">
      <div class="table-card-header">
        <h3>Recent Bookings</h3>
        <a href="/admin/bookings" class="btn btn-sm btn-green">View All</a>
      </div>
      <table>
        <thead>
          <tr><th>User</th><th>Turf</th><th>Date</th><th>Time</th><th>Amount</th><th>Status</th></tr>
        </thead>
        <tbody>
          {% for b in recent_bookings %}
          <tr>
            <td>{{ b.user_name }}</td>
            <td>{{ b.turf_name }}</td>
            <td>{{ b.booking_date }}</td>
            <td>{{ b.start_time }} ‚Äì {{ b.end_time }}</td>
            <td><strong>‚Çπ{{ b.total_amount }}</strong></td>
            <td><span class="badge {{ 'badge-green' if b.status == 'confirmed' else 'badge-red' }}">{{ b.status }}</span></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
